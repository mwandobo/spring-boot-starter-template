###
POST {{base_url}}/auth/login
Content-Type: application/json

{
  "email": "breezojr@gmail.com",
  "password": "admin123"
}

> {%
    client.global.set("token", response.body.token);
%}

###
POST {{base_url}}/auth/register
Content-Type: application/json

{
  "email": "admin@gmail.com",
  "name": "John Doe",
  "password": "123456"
}

###
GET {{base_url}}/users
Authorization: Bearer {{token}}

###
POST {{base_url}}/roles/assign
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "userId": 2,
  "roleId": 1
}

###
POST {{base_url}}/permissions/assign
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "permissionIds": [4,5],
  "roleId": 2
}

###
GET {{base_url}}/roles
Authorization: Bearer {{token}}

###
POST {{base_url}}/roles
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Sub-Admin"
}

###
PUT {{base_url}}/roles/3
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Suba-Admin"
}

###
DELETE {{base_url}}/roles/3
Authorization: Bearer {{token}}
Content-Type: application/json

###
GET {{base_url}}/permissions
Authorization: Bearer {{token}}

###
GET {{base_url}}/sys-approvals
Authorization: Bearer {{token}}

###
GET {{base_url}}/user-approvals
Authorization: Bearer {{token}}

###
POST {{base_url}}/user-approvals
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "User Approval",
  "description": "This is the approval for user",
  "sysApprovalId": 1
}

###
DELETE {{base_url}}/user-approvals/1
Authorization: Bearer {{token}}

###
DELETE {{base_url}}/approval-levels/6
Authorization: Bearer {{token}}

###
POST {{base_url}}/approval-levels
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Top level",
  "roleId": 1,
  "userApprovalId": 1,
  "description": "This is some descriptions"

}

### approve levels
GET {{base_url}}/approval-actions
Authorization: Bearer {{token}}

###
POST {{base_url}}/approval-actions
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Top levS",
  "approvalLevelId": 1,
  "entityName": "Role",
  "entityId": 1,
  "description": "This is first action",
  "action": "APPROVED"
}


###
POST {{base_url}}/approval-actions/3
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Top levS",
  "approvalLevelId": 1,
  "entityName": "Role",
  "entityId": 1,
  "description": "This is first action",
  "action": "approve"
}

###
GET {{base_url}}/mail/send-email
Authorization: Bearer {{token}}

###
GET {{base_url}}/notifications
Authorization: Bearer {{token}}

###
POST {{base_url}}/notifications
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Urgent: Action Required",
  "description": "Please review the pending request",
  "forName": "Jane Smith",
  "forId": "EMP002",
  "isRead": false,
  "expiresAt": "2024-11-30T17:00:00",
  "redirectUrl": "/requests/456",
  "group": "urgent",
  "userId": 1,
  "recipientId": 1
}

###
POST {{base_url}}/notifications/send-notifications
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "channel": "EMAIL",
  "template": "create-level",
  "subject": "New Approval Level Created",
  "recipients": [
    "breezojr@gmail.com",
    "bonifacesimon04@gmail.com"
  ],
  "userId": 1,
  "description": "New approval level has been added",
  "forName": "Level Manager",
  "forId": "level-123",
  "redirectUrl": "https://mcb.or.tz/system/levels/level-123",
  "context": {
    "levelName": "Finance Level 1",
    "description": "Handles all finance approvals",
    "status": "Active",
    "manageLevelLink": "https://mcb.or.tz/admin/levels",
    "year": "2025"
  }
}
