<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
</head>

<body style="font-family: Arial, sans-serif; max-width: 650px; margin: 0 auto; background-color: #ffffff; border: 1px solid #dee2e6; border-radius: 6px; padding: 20px;">

<h2 style="color: #dc3545; border-bottom: 2px solid #dc3545; padding-bottom: 8px;">
    ❌ Request Rejected - Action Required
</h2>

<p>Hello <span th:text="${userName}">User</span>,</p>

<p>We regret to inform you that your submitted request has been
    <strong style="color: #dc3545;">rejected</strong>.
</p>

<div style="background: #f8d7da; border-left: 4px solid #dc3545; padding: 12px 15px; margin: 15px 0;">
    <strong>Request Details:</strong>
    <p style="margin: 5px 0;" th:text="${requestDescription}">Description</p>
</div>

<table cellpadding="8" cellspacing="0" width="100%"
       style="border-collapse: collapse; background: #f8f9fa; border: 1px solid #dee2e6; margin-top: 10px;">
    <tr>
        <td width="30%" style="border: 1px solid #dee2e6;"><strong>Requested Assets</strong></td>
        <td style="border: 1px solid #dee2e6;">

            <!-- If assets list is NOT empty -->
            <span th:if="${assets != null}">
                <span th:each="item, iter : ${assets}">
                    <span th:text="${item.asset.name}"></span>
                    <span th:if="${!iter.last}">, </span>
                </span>
            </span>

            <!-- If assets list is empty -->
            <span th:if="${assets == null}">N/A</span>

        </td>
    </tr>

    <tr>
        <td style="border: 1px solid #dee2e6;"><strong>Rejected By</strong></td>
        <td style="border: 1px solid #dee2e6;" th:text="${rejectedBy}">Approver</td>
    </tr>

    <tr>
        <td style="border: 1px solid #dee2e6;"><strong>Rejection Date</strong></td>
        <td style="border: 1px solid #dee2e6;" th:text="${rejectionDate}">2025-01-01</td>
    </tr>

    <tr>
        <td style="border: 1px solid #dee2e6;"><strong>Priority</strong></td>
        <td style="border: 1px solid #dee2e6;">
            <span th:style="'color:' + ${priorityColor} + '; font-weight:bold;'"
                  th:text="${priority}">Normal</span>
        </td>
    </tr>
</table>

<div style="background: #fff3cd; border: 1px solid #ffeeba; border-radius: 4px; padding: 12px; margin: 15px 0;">
    <strong>⚠️ Request Rejected:</strong>
    <p style="margin: 8px 0;">
        Please review the reason for rejection and make the necessary adjustments if you wish to resubmit.
    </p>

    <a th:href="${approvalLink}"
       style="display: inline-block; background: #dc3545; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; font-weight: bold; margin-top: 5px;">
        Review Rejected Request
    </a>
</div>

<p style="margin-top: 15px;">
    If you have any questions about this rejection, please contact the approver or your system administrator.
</p>

<br />

<p style="font-size: 0.95em; color: #343a40;">
    Regards,<br/>
    <strong>Approval System</strong><br/>
    <span style="color: #dc3545;">Mwalimu Commercial Bank PLC</span><br/>
    <small>Automated Approval Notification</small>
</p>

<div style="border-top: 1px solid #dee2e6; margin-top: 20px; padding-top: 10px; text-align: center; color: #6c757d; font-size: 0.85em;">
    This is an automated message — please do not reply.<br/>
    © <span th:text="${year}">2024</span> Mwalimu Commercial Bank PLC. All rights reserved.
</div>

</body>
</html>
